{
"AWSTemplateFormatVersion": "2010-09-09",
    "Description": "",
    "Metadata": {

    },
    "Parameters": {      
        "elasticSearchDomainName": {
            "Description": "Elastic Search Movies Domain",
            "Type": "String",
            "Default": "movies",
            "AllowedPattern":"[a-z0-9]+"
        },
        "s3Bucket": {
            "Description": "The name of the s3 bucket to use for the data",
            "Type": "String",
            "Default": "databucket",
            "AllowedPattern":"[a-z0-9]+"
        }
        
    },
    "Mappings": {

    },
    "Conditions": {

    },
    "Resources": {
        "ElasticsearchDomain": {
            "Type": "AWS::Elasticsearch::Domain",
            "Properties": {
              "DomainName": {"Ref": "elasticSearchDomainName"},
              "ElasticsearchClusterConfig": {
                "DedicatedMasterEnabled": "true",
                "InstanceCount": "2",
                "ZoneAwarenessEnabled": "true",
                "InstanceType": "m4.large.elasticsearch",
                "DedicatedMasterType": "m4.large.elasticsearch",
                "DedicatedMasterCount": "3"
              },
              "EBSOptions": {
                "EBSEnabled": true,
                "Iops": 0,
                "VolumeSize": 20,
                "VolumeType": "gp2"
              },
              "SnapshotOptions": {
                "AutomatedSnapshotStartHour": "0"
              },
      
              "AdvancedOptions": {
                "rest.action.multi.allow_explicit_index": "true"
              }
            }
          },
        
        "S3BucketDataSet": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
                "AccessControl": "Private",
                "BucketName": {"Ref":"s3Bucket"}
                
            }
        }
        
    },
    "Outputs": {

    }
}
